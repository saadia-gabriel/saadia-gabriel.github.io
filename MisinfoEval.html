<!DOCTYPE html>
<html lang="en">
  <head>
   <section class="container" id="Other" style="margin-bottom:15px; padding: 10px 10px; font-family: Verdana, Geneva, sans-serif; color:#333333; font-size:12pt;">
   <div class="row col-xs-12 col-md-12">
     <div class="panel panel-primary">
     <div class="panel-heading"><strong>Introduction to MisinfoEval Simulated Environment:</strong></div>

       <p>Our simulated social media newsfeed provides a realistic environment for testing the effect of interventions. You can view a default demo environment below, or upload your own news claims and interventions using a specific csv file format. </p>
       <p>You can populate the social media news feed using a csv file with following fields:</p>
       <ul>
         <li><b>headline1-headline5</b>: the text of the news headlines</li>
         <li><b>img1-img5</b>: the public urls for the associated headline images</li>
         <li><b>source1-source5</b>: the source for the associated news articles</li>
         <li><b>explanation1-explanation5</b>: the text for the interventions</li>
         <li><b>time1-time5</b>: the time since the news article release (randomly sampled in the original paper)</li>
         <li><b>label1-label5</b>: the label (true or false) of the news article</li>
</ul>

       <p>If this resource is useful to you, please cite us.<br><br>  <blockquote>
         @article{Gabriel2024MisinfoEvalGA,
  title={MisinfoEval: Generative AI in the Era of "Alternative Facts"},
  author={Saadia Gabriel and Liang Lyu and James Siderius and Marzyeh Ghassemi and Jacob Andreas and Asu Ozdaglar},
  journal={Proceedings of the 2024 Conference on Empirical Methods in Natural Language Processing},
  year={2024}
}  </blockquote></p>
     </div>
     <div class="panel panel-primary">
     <div class="panel-heading"><strong>Upload File (Optional):</strong></div>
     </div>
   </div>
     
   </section>
  </head>
  <body>
    <input id="upload" type="file">
<form id="csvForm">
    <input id="a"></input>
    <input id="b"></input>
    <input id="c"></input>
    <input id="d"></input>
</form>
<button id="download">Download</button>
  </body>

<script>
  document.getElementById("upload").addEventListener("change", upload, false);
document.getElementById("download").addEventListener("click", download, false);

function upload(e) {
    var data = null;
    var file = e.target.files[0];

    var reader = new FileReader();
    reader.readAsText(file);
    reader.onload = function (event) {
        var csvData = event.target.result;

        var parsedCSV = d3.csv.parseRows(csvData);

        parsedCSV.forEach(function (d, i) {
            if (i == 0) return true; // skip the header
            document.getElementById(d[0]).value = d[1];
        });
    }
}

function download(e) {
    data = [["id","value"]];

    var f = d3.selectAll("#csvForm > input")[0];
    f.forEach(function(d,i){
        data.push([d.id, d.value]);
    });

    var csvContent = "data:text/csv;charset=utf-8,";
    data.forEach(function (d, i) {
        dataString = d.join(",");
        csvContent += i < data.length ? dataString + "\n" : dataString;
    });

    var encodedUri = encodeURI(csvContent);
    var link = document.createElement("a");
    link.setAttribute("href", encodedUri);
    link.setAttribute("download", "FormData.csv");
    link.click(); 
}
</script>
</html>
